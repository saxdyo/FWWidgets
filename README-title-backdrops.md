# TMDBå¸¦æ ‡é¢˜èƒŒæ™¯å›¾æ•°æ®åŒ…

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°TMDBå¸¦æ ‡é¢˜èƒŒæ™¯å›¾æ•°æ®åŒ…ï¼Œæ¯6å°æ—¶æ›´æ–°ä¸€æ¬¡ï¼ŒåŒ…å«çƒ­é—¨ç”µå½±å’Œç”µè§†å‰§å‰20éƒ¨ã€‚

## ğŸš€ æ›´æ–°ç­–ç•¥

### ğŸ“¦ æ•°æ®åŒ…æ›´æ–°
- **æ›´æ–°é¢‘ç‡**: æ¯6å°æ—¶è‡ªåŠ¨æ›´æ–°
- **æ•°æ®å†…å®¹**: çƒ­é—¨ç”µå½±å‰20éƒ¨ + çƒ­é—¨ç”µè§†å‰§å‰20éƒ¨
- **æ–‡ä»¶ä½ç½®**: `data/tmdb-title-backdrops.json`
- **æ›´æ–°æ–¹å¼**: GitHub Actionsè‡ªåŠ¨æ‰§è¡Œ

### âš¡ å®æ—¶ç”Ÿæˆ
- **è§¦å‘æ¡ä»¶**: æ•°æ®åŒ…ä¸å¯ç”¨æˆ–è¿‡æœŸæ—¶
- **å¤‡ç”¨æ–¹æ¡ˆ**: æä¾›æœ¬åœ°å¤‡ç”¨æ•°æ®
- **é”™è¯¯å¤„ç†**: å®Œæ•´çš„é”™è¯¯æ•è·å’Œæ—¥å¿—è®°å½•

## ğŸ“Š æ•°æ®æ ¼å¼

```json
{
  "last_updated": "2025-08-02 17:50:27",
  "update_interval": "6å°æ—¶",
  "total_items": 40,
  "movies_count": 20,
  "tv_shows_count": 20,
  "today_global": [
    {
      "id": 552524,
      "title": "æ˜Ÿé™…å®è´å²è¿ªå¥‡",
      "type": "movie",
      "genreTitle": "ç”µå½±â€¢å®¶åº­â€¢ç§‘å¹»â€¢å–œå‰§",
      "rating": 7.2,
      "release_date": "2025-05-17",
      "overview": "è®²è¿°å­¤ç‹¬çš„å¤å¨å¤·å°å¥³å­©è‰è...",
      "poster_url": "https://image.tmdb.org/t/p/original/dpEWJUvwpYAX1YFvoyzOfsikIGq.jpg",
      "title_backdrop": "https://image-overlay.vercel.app/api/backdrop?bg=...&title=æ˜Ÿé™…å®è´å²è¿ªå¥‡&year=2025&rating=7.2&type=movie"
    }
  ]
}
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. æ‰‹åŠ¨æ›´æ–°æ•°æ®åŒ…
```bash
node generate-title-backdrop.js
```

### 2. åœ¨è„šæœ¬ä¸­è°ƒç”¨
```javascript
// è°ƒç”¨å¸¦æ ‡é¢˜èƒŒæ™¯å›¾æ•°æ®
const results = await loadTmdbTitleBackdropData({
  data_source: "today_global",
  media_type: "all",
  min_rating: "7.0",
  sort_by: "rating_desc",
  page: 1
});
```

### 3. æ¨¡å—é…ç½®
- **æ¨¡å—åç§°**: `TMDBå¸¦æ ‡é¢˜èƒŒæ™¯å›¾`
- **å‡½æ•°åç§°**: `loadTmdbTitleBackdropData`
- **ç¼“å­˜æ—¶é—´**: 1800ç§’ï¼ˆ30åˆ†é’Ÿï¼‰

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ generate-title-backdrop.js          # æ•°æ®åŒ…ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ update-title-backdrops-cron.js     # å®šæ—¶ä»»åŠ¡è„šæœ¬
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ update-title-backdrops.yml     # GitHub Actionså·¥ä½œæµ
â”œâ”€â”€ data/
â”‚   â””â”€â”€ tmdb-title-backdrops.json      # æ•°æ®åŒ…æ–‡ä»¶
â””â”€â”€ logs/
    â””â”€â”€ title-backdrops-update.log     # æ›´æ–°æ—¥å¿—
```

## â° æ›´æ–°è®¡åˆ’

### GitHub Actionså®šæ—¶ä»»åŠ¡
- **é¢‘ç‡**: æ¯6å°æ—¶æ‰§è¡Œä¸€æ¬¡
- **æ—¶é—´**: UTC 0:00, 6:00, 12:00, 18:00
- **è§¦å‘**: è‡ªåŠ¨å®šæ—¶ + æ‰‹åŠ¨è§¦å‘

### æ›´æ–°æ£€æŸ¥é€»è¾‘
1. æ£€æŸ¥æ•°æ®åŒ…æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ˜¯å¦è¶…è¿‡6å°æ—¶
3. å¦‚éœ€æ›´æ–°ï¼Œè°ƒç”¨TMDB APIè·å–æœ€æ–°æ•°æ®
4. ç”Ÿæˆå¸¦æ ‡é¢˜èƒŒæ™¯å›¾URL
5. ä¿å­˜åˆ°æ•°æ®åŒ…æ–‡ä»¶
6. è®°å½•æ›´æ–°æ—¥å¿—

## ğŸ¯ ä¼˜åŠ¿ç‰¹ç‚¹

### âœ… æ•°æ®åŒ…ä¼˜åŠ¿
- **âš¡ é€Ÿåº¦å¿«**: ç›´æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œå“åº”æ—¶é—´ < 100ms
- **ğŸ›¡ï¸ ç¨³å®šæ€§é«˜**: ä¸ä¾èµ–å¤–éƒ¨APIï¼Œç½‘ç»œé—®é¢˜ä¸å½±å“
- **ğŸ’° æˆæœ¬ä½**: å‡å°‘APIè°ƒç”¨æ¬¡æ•°ï¼ŒèŠ‚çœè´¹ç”¨
- **ğŸ“± ç¦»çº¿å¯ç”¨**: æ•°æ®åŒ…å¯ä»¥ç¦»çº¿ä½¿ç”¨
- **ğŸ”„ ä¸€è‡´æ€§å¥½**: æ‰€æœ‰ç”¨æˆ·çœ‹åˆ°ç›¸åŒçš„æ•°æ®

### âœ… å®æ—¶ç”Ÿæˆä¼˜åŠ¿
- **ğŸ†• æ•°æ®æœ€æ–°**: æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯æœ€æ–°æ•°æ®
- **ğŸ“ˆ æ•°æ®é‡å¤§**: å¯ä»¥è·å–æ›´å¤šå†…å®¹
- **ğŸ›ï¸ çµæ´»ç­›é€‰**: æ”¯æŒæ›´å¤šç­›é€‰æ¡ä»¶
- **ğŸ”„ åŠ¨æ€æ›´æ–°**: æ•°æ®å®æ—¶æ›´æ–°

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—æ–‡ä»¶
- **ä½ç½®**: `logs/title-backdrops-update.log`
- **å†…å®¹**: æ›´æ–°æ—¶é—´ã€æ•°æ®ç»Ÿè®¡ã€é”™è¯¯ä¿¡æ¯
- **æ ¼å¼**: `[æ—¶é—´æˆ³] æ¶ˆæ¯å†…å®¹`

### ç›‘æ§æŒ‡æ ‡
- æ›´æ–°é¢‘ç‡: æ¯6å°æ—¶
- æ•°æ®é‡: 40ä¸ªé¡¹ç›®ï¼ˆ20éƒ¨ç”µå½± + 20éƒ¨ç”µè§†å‰§ï¼‰
- æ–‡ä»¶å¤§å°: çº¦500KB
- å“åº”æ—¶é—´: < 100ms

## ğŸ› ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
TMDB_API_KEY=your_tmdb_api_key_here
```

### é…ç½®å‚æ•°
```javascript
const CONFIG = {
  MAX_MOVIES: 20,        // çƒ­é—¨ç”µå½±å‰20éƒ¨
  MAX_TV_SHOWS: 20,      // çƒ­é—¨ç”µè§†å‰§å‰20éƒ¨
  UPDATE_INTERVAL: 6 * 60 * 60 * 1000, // 6å°æ—¶æ›´æ–°é—´éš”
  RATE_LIMIT_DELAY: 250, // APIè¯·æ±‚å»¶è¿Ÿ
  LANGUAGE: 'zh-CN'      // ä¸­æ–‡å†…å®¹
};
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

1. **æ™ºèƒ½ç¼“å­˜**: æ£€æŸ¥æ•°æ®åŒ…æ›´æ–°æ—¶é—´ï¼Œé¿å…é‡å¤ç”Ÿæˆ
2. **APIé™åˆ¶**: åˆç†æ§åˆ¶APIè°ƒç”¨é¢‘ç‡
3. **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¤‡ç”¨æ–¹æ¡ˆå’Œé”™è¯¯æ¢å¤
4. **æ—¥å¿—è®°å½•**: è¯¦ç»†çš„æ›´æ–°æ—¥å¿—ä¾¿äºç›‘æ§
5. **æ•°æ®å‹ç¼©**: JSONæ–‡ä»¶ä¼˜åŒ–ï¼Œå‡å°‘æ–‡ä»¶å¤§å°

## ğŸ‰ æ€»ç»“

è¿™ä¸ªæ–¹æ¡ˆç»“åˆäº†**æ•°æ®åŒ…**çš„**é€Ÿåº¦å’Œç¨³å®šæ€§**ï¼Œä»¥åŠ**å®æ—¶ç”Ÿæˆ**çš„**çµæ´»æ€§**ï¼Œä¸ºç”¨æˆ·æä¾›äº†æœ€ä½³çš„ä½“éªŒï¼

- ğŸ“¦ **ä¸»è¦ä½¿ç”¨æ•°æ®åŒ…**: æ¯å¤©4æ¬¡è‡ªåŠ¨æ›´æ–°ï¼Œç¡®ä¿æ•°æ®æ–°é²œ
- ğŸ”„ **å®æ—¶ç”Ÿä½œä¸ºå¤‡ç”¨**: å½“æ•°æ®åŒ…ä¸å¯ç”¨æ—¶å¯ç”¨
- ğŸ“Š **æ™ºèƒ½åˆ‡æ¢æœºåˆ¶**: è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ•°æ®æº
- ğŸ›¡ï¸ **å®Œå–„é”™è¯¯å¤„ç†**: å¤šé‡å¤‡ç”¨æ–¹æ¡ˆç¡®ä¿å¯ç”¨æ€§
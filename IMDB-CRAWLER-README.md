# IMDbæ•°æ®çˆ¬å–å™¨

è¿™æ˜¯ä¸€ä¸ªç”¨äºè·å–å’Œæ›´æ–°IMDbå½±è§†æ•°æ®çš„çˆ¬å–å™¨ï¼Œæ”¯æŒç”µå½±ã€å‰§é›†å’ŒåŠ¨ç”»æ•°æ®ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¬ æ”¯æŒçš„æ•°æ®ç±»å‹
- **ç”µå½± (Movies)**: çƒ­é—¨ç”µå½±ã€æœ€æ–°ä¸Šæ˜ ã€è¯„åˆ†æ’è¡Œç­‰
- **å‰§é›† (TV Shows)**: çƒ­é—¨å‰§é›†ã€æœ€æ–°å‰§é›†ã€è¯„åˆ†æ’è¡Œç­‰  
- **åŠ¨ç”» (Anime)**: çƒ­é—¨åŠ¨ç”»ã€æœ€æ–°åŠ¨ç”»ã€è¯„åˆ†æ’è¡Œç­‰

### ğŸŒ æ”¯æŒçš„åœ°åŒº
- å…¨éƒ¨åœ°åŒº (all)
- ä¸­å›½å¤§é™† (country:cn)
- ç¾å›½ (country:us)
- è‹±å›½ (country:gb)
- æ—¥æœ¬ (country:jp)
- éŸ©å›½ (country:kr)
- æ¬§ç¾ (region:us-eu)
- é¦™æ¸¯ (country:hk)
- å°æ¹¾ (country:tw)

### ğŸ“Š æ”¯æŒçš„æ’åºæ–¹å¼
- **çƒ­åº¦æ’åº**: hs (çƒ­é—¨åº¦)
- **è¯„åˆ†æ’åº**: r (è¯„åˆ†)
- **ä¸Šæ˜ æ—¶é—´**: rd (å‘å¸ƒæ—¥æœŸ)
- **å¹´ä»½æ’åº**: y (å¹´ä»½)
- **æ ‡é¢˜æ’åº**: t (æ ‡é¢˜)
- **æ—¶é•¿æ’åº**: d (æ—¶é•¿)

## å®‰è£…å’Œé…ç½®

### 1. ç¯å¢ƒè¦æ±‚
- Node.js 14+
- TMDB API Key

### 2. è·å–TMDB API Key
1. è®¿é—® [TMDBå®˜ç½‘](https://www.themoviedb.org/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. è¿›å…¥ Settings > API
4. ç”³è¯·API Key

### 3. é…ç½®API Key
```bash
# æ–¹æ³•1: ç¯å¢ƒå˜é‡
export TMDB_API_KEY="your_api_key_here"

# æ–¹æ³•2: ç›´æ¥ä¿®æ”¹è„šæœ¬
# ç¼–è¾‘ imdb-crawler.js ä¸­çš„ CONFIG.TMDB_API_KEY
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å‘½ä»¤
```bash
# å®Œæ•´çˆ¬å–æ‰€æœ‰æ•°æ®
node imdb-crawler.js crawl

# æ›´æ–°ç°æœ‰æ•°æ®
node imdb-crawler.js update

# æµ‹è¯•æ¨¡å¼
node imdb-crawler.js test

# æŸ¥çœ‹å¸®åŠ©
node imdb-crawler.js
```

### é«˜çº§ç”¨æ³•

#### 1. è‡ªå®šä¹‰é…ç½®
ç¼–è¾‘ `imdb-crawler.js` ä¸­çš„ `CONFIG` å¯¹è±¡ï¼š

```javascript
const CONFIG = {
  // è¯·æ±‚é—´éš”(æ¯«ç§’)
  REQUEST_DELAY: 1000,
  
  // æœ€å¤§é‡è¯•æ¬¡æ•°
  MAX_RETRIES: 3,
  
  // æ¯é¡µæ•°æ®é‡
  ITEMS_PER_PAGE: 20,
  
  // æœ€å¤§é¡µæ•°
  MAX_PAGES: 50,
  
  // æ•°æ®å­˜å‚¨è·¯å¾„
  DATA_DIR: './imdb-data'
};
```

#### 2. è‡ªå®šä¹‰æ•°æ®èŒƒå›´
```javascript
// åªçˆ¬å–ç‰¹å®šåœ°åŒº
REGIONS: ['country:cn', 'country:us'],

// åªçˆ¬å–ç‰¹å®šåª’ä½“ç±»å‹
MEDIA_TYPES: ['movie', 'tv'],

// åªçˆ¬å–ç‰¹å®šæ’åºæ–¹å¼
SORT_TYPES: ['hs', 'r']
```

## æ•°æ®æ ¼å¼

### è¾“å‡ºæ•°æ®ç»“æ„
```json
{
  "id": 574475,
  "p": "/nMUAHKfJg1eqKC4t8LCP8GFKG5I.jpg",
  "b": "/uIpJPDNFoeX0TVml9smPrs9KUVx.jpg",
  "t": "æ­»ç¥æ¥äº†6ï¼šè¡€è„‰è¯…å’’",
  "r": 7.201,
  "y": 2025,
  "rd": "2025-05-14",
  "hs": 15.452,
  "d": 1205.511,
  "mt": "movie",
  "o": "ç”µå½±ç®€ä»‹..."
}
```

### å­—æ®µè¯´æ˜
- `id`: TMDB ID
- `p`: æµ·æŠ¥è·¯å¾„
- `b`: èƒŒæ™¯å›¾è·¯å¾„
- `t`: æ ‡é¢˜
- `r`: è¯„åˆ†
- `y`: å¹´ä»½
- `rd`: å‘å¸ƒæ—¥æœŸ
- `hs`: çƒ­åº¦å€¼
- `d`: æ—¶é•¿(åˆ†é’Ÿ)
- `mt`: åª’ä½“ç±»å‹ (movie/tv/anime)
- `o`: ç®€ä»‹

## æ•°æ®å­˜å‚¨ç»“æ„

```
imdb-data/
â”œâ”€â”€ movies/
â”‚   â”œâ”€â”€ all/
â”‚   â”‚   â”œâ”€â”€ by_hs/
â”‚   â”‚   â”‚   â””â”€â”€ page_1.json
â”‚   â”‚   â”œâ”€â”€ by_r/
â”‚   â”‚   â”‚   â””â”€â”€ page_1.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ country_cn/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tv/
â”‚   â””â”€â”€ ...
â””â”€â”€ anime/
    â””â”€â”€ ...
```

## ä¸fw2.jsé›†æˆ

### 1. æ•°æ®æºé…ç½®
åœ¨ `fw2.js` ä¸­ï¼ŒIMDBæ¨¡å—ä½¿ç”¨ä»¥ä¸‹æ•°æ®æºï¼š

```javascript
// ç”µå½±æ•°æ®
const movieUrl = `https://raw.githubusercontent.com/opix-maker/Forward/main/imdb-data-platform/dist/movies/${region}/by_${sortKey}/page_${page}.json`;

// åŠ¨ç”»æ•°æ®
const animeUrl = `https://raw.githubusercontent.com/opix-maker/Forward/main/imdb-data-platform/dist/anime/${region}/by_${sortKey}/page_${page}.json`;
```

### 2. æ¨¡å—é…ç½®
```javascript
{
  title: "IMDb å½±è§†æ¦œå•",
  description: "IMDbçƒ­é—¨å½±è§†å†…å®¹",
  functionName: "loadImdbMovieListModule",
  params: [
    {
      name: "media_type",
      title: "åª’ä½“ç±»å‹",
      enumOptions: [
        { title: "å…¨éƒ¨", value: "all" },
        { title: "ç”µå½±", value: "movie" },
        { title: "å‰§é›†", value: "tv" },
        { title: "åŠ¨ç”»", value: "anime" }
      ]
    }
  ]
}
```

## æ³¨æ„äº‹é¡¹

### 1. APIé™åˆ¶
- TMDB APIæœ‰è¯·æ±‚é¢‘ç‡é™åˆ¶
- å»ºè®®è®¾ç½®é€‚å½“çš„ `REQUEST_DELAY`
- é¿å…çŸ­æ—¶é—´å†…å¤§é‡è¯·æ±‚

### 2. æ•°æ®æ›´æ–°
- å»ºè®®å®šæœŸè¿è¡Œæ›´æ–°å‘½ä»¤
- å¯ä»¥è®¾ç½®å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ›´æ–°
- æ³¨æ„å¤‡ä»½é‡è¦æ•°æ®

### 3. é”™è¯¯å¤„ç†
- è„šæœ¬åŒ…å«é‡è¯•æœºåˆ¶
- ç½‘ç»œé”™è¯¯ä¼šè‡ªåŠ¨è·³è¿‡
- æ£€æŸ¥æ—¥å¿—äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. API Keyé”™è¯¯
```
âŒ è·å–çƒ­é—¨ç”µå½±å¤±è´¥: 401 Unauthorized
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®é…ç½®

#### 2. ç½‘ç»œè¶…æ—¶
```
âŒ è¯·æ±‚å¤±è´¥: timeout
```
**è§£å†³æ–¹æ¡ˆ**: å¢åŠ  `REQUEST_DELAY` æˆ–æ£€æŸ¥ç½‘ç»œè¿æ¥

#### 3. æ•°æ®ä¸ºç©º
```
âš ï¸ ç¬¬1é¡µæ— æ•°æ®ï¼Œåœæ­¢çˆ¬å–
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥APIå“åº”æˆ–è°ƒæ•´è¯·æ±‚å‚æ•°

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªçˆ¬å–å™¨ï¼

## è®¸å¯è¯

MIT License